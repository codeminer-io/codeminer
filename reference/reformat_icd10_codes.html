<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reformat ICD-10 codes — reformat_icd10_codes • codeminer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reformat ICD-10 codes — reformat_icd10_codes"><meta name="description" content="The lookup sheet in
UKB resource 592
for ICD-10 (&quot;icd10_lkp&quot;) has a column called ALT_CODE, which is an
alternative format for ICD-10 codes. This is the format used in the mapping
sheets for this resource, as well as in
Field ID 41270.
Note however that in contrast to the ICD10 lookup and mapping sheets,
undivided 3 character codes do not have an 'X' appended in the UK Biobank
dataset. This function converts from one format to the other, with the
option to strip the final 'X' from undivided 3 character codes if converting
to ALT_CODE format."><meta property="og:description" content="The lookup sheet in
UKB resource 592
for ICD-10 (&quot;icd10_lkp&quot;) has a column called ALT_CODE, which is an
alternative format for ICD-10 codes. This is the format used in the mapping
sheets for this resource, as well as in
Field ID 41270.
Note however that in contrast to the ICD10 lookup and mapping sheets,
undivided 3 character codes do not have an 'X' appended in the UK Biobank
dataset. This function converts from one format to the other, with the
option to strip the final 'X' from undivided 3 character codes if converting
to ALT_CODE format."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">codeminer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/codeminer.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/caliber.html">CALIBER code lists</a></li>
    <li><a class="dropdown-item" href="../articles/icd10_formats.html">ICD10 code formats</a></li>
    <li><a class="dropdown-item" href="../articles/map_codes.html">Mapping between clinical coding systems</a></li>
    <li><a class="dropdown-item" href="../articles/phecodes.html">Phecodes</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/codeminer-io/codeminer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reformat ICD-10 codes</h1>
      <small class="dont-index">Source: <a href="https://github.com/codeminer-io/codeminer/blob/main/R/clinical_codes.R" class="external-link"><code>R/clinical_codes.R</code></a></small>
      <div class="d-none name"><code>reformat_icd10_codes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The lookup sheet in
<a href="https://biobank.ndph.ox.ac.uk/ukb/refer.cgi?id=592" class="external-link">UKB resource 592</a>
for ICD-10 ("icd10_lkp") has a column called <code>ALT_CODE</code>, which is an
alternative format for ICD-10 codes. This is the format used in the mapping
sheets for this resource, as well as in
<a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41270" class="external-link">Field ID 41270</a>.
<em>Note however that in contrast to the ICD10 lookup and mapping sheets,
undivided 3 character codes do not have an 'X' appended in the UK Biobank
dataset</em>. This function converts from one format to the other, with the
option to strip the final 'X' from undivided 3 character codes if converting
to <code>ALT_CODE</code> format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">reformat_icd10_codes</span><span class="op">(</span></span>
<span>  <span class="va">icd10_codes</span>,</span>
<span>  all_lkps_maps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  input_icd10_format <span class="op">=</span> <span class="st">"ICD10_CODE"</span>,</span>
<span>  output_icd10_format <span class="op">=</span> <span class="st">"ALT_CODE"</span>,</span>
<span>  unrecognised_codes <span class="op">=</span> <span class="st">"error"</span>,</span>
<span>  strip_x <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-icd-codes">icd10_codes<a class="anchor" aria-label="anchor" href="#arg-icd-codes"></a></dt>
<dd><p>character vector of ICD-10 codes</p></dd>


<dt id="arg-all-lkps-maps">all_lkps_maps<a class="anchor" aria-label="anchor" href="#arg-all-lkps-maps"></a></dt>
<dd><p>Either a named list of lookup and mapping tables
(either data frames or <code>tbl_dbi</code> objects), or the path to a Duckdb database
containing these tables. If <code>NULL</code>, will attempt to connect to a Duckdb
database named 'all_lkps_maps.db' in the current working directory, or to
a a Duckdb database specified by an environmental variable named
'ALL_LKPS_MAPS_DB' (see
<a href="https://resources.numbat.space/using-rprofile-and-renviron.html#renviron" class="external-link">here</a>
for how to set environment variables using a <code>.Renviron</code> file). The latter
method will be used in preference.</p></dd>


<dt id="arg-input-icd-format">input_icd10_format<a class="anchor" aria-label="anchor" href="#arg-input-icd-format"></a></dt>
<dd><p>character. Must be either "ICD10_CODE" or
"ALT_CODE".</p></dd>


<dt id="arg-output-icd-format">output_icd10_format<a class="anchor" aria-label="anchor" href="#arg-output-icd-format"></a></dt>
<dd><p>character. Must be either "ICD10_CODE" or
"ALT_CODE".</p></dd>


<dt id="arg-unrecognised-codes">unrecognised_codes<a class="anchor" aria-label="anchor" href="#arg-unrecognised-codes"></a></dt>
<dd><p>Either 'error' (default) or 'warning'. If any input
<code>codes</code> are unrecognised, then either an error or warning will be raised.</p></dd>


<dt id="arg-strip-x">strip_x<a class="anchor" aria-label="anchor" href="#arg-strip-x"></a></dt>
<dd><p>If <code>TRUE</code> and converting to <code>ALT_CODE</code> format, 'X' is removed
from the end of undivided 3 character codes (default is <code>FALSE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>character vector of ICD-10 codes, reformatted as specified by
<code>output_icd10_format</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Clinical code lookups and mappings:
<code><a href="CODES.html">CODES</a>()</code>,
<code><a href="GET_ATTRIBUTES.html">GET_ATTRIBUTES</a>()</code>,
<code><a href="HAS_ATTRIBUTES.html">HAS_ATTRIBUTES</a>()</code>,
<code><a href="default_col_filters.html">default_col_filters</a>()</code>,
<code><a href="get_child_codes.html">get_child_codes</a>()</code>,
<code><a href="get_children_sct.html">get_children_sct</a>()</code>,
<code><a href="get_mapping_df.html">get_mapping_df</a>()</code>,
<code><a href="get_parents_sct.html">get_parents_sct</a>()</code>,
<code><a href="map_codes.html">map_codes</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># build dummy all_lkps_maps</span></span></span>
<span class="r-in"><span><span class="va">all_lkps_maps_dummy</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_all_lkps_maps_dummy.html">build_all_lkps_maps_dummy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reformat from ICD10_CODE to ALT_CODE</span></span></span>
<span class="r-in"><span><span class="fu">reformat_icd10_codes</span><span class="op">(</span></span></span>
<span class="r-in"><span>  icd10_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E10.9"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  all_lkps_maps <span class="op">=</span> <span class="va">all_lkps_maps_dummy</span>,</span></span>
<span class="r-in"><span>  input_icd10_format <span class="op">=</span> <span class="st">"ICD10_CODE"</span>,</span></span>
<span class="r-in"><span>  output_icd10_format <span class="op">=</span> <span class="st">"ALT_CODE"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "E109"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reformat from ALT_CODE to ICD10_CODE</span></span></span>
<span class="r-in"><span><span class="fu">reformat_icd10_codes</span><span class="op">(</span></span></span>
<span class="r-in"><span>  icd10_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E109"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  all_lkps_maps <span class="op">=</span> <span class="va">all_lkps_maps_dummy</span>,</span></span>
<span class="r-in"><span>  input_icd10_format <span class="op">=</span> <span class="st">"ALT_CODE"</span>,</span></span>
<span class="r-in"><span>  output_icd10_format <span class="op">=</span> <span class="st">"ICD10_CODE"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "E10.9"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

