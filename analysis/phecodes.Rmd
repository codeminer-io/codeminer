---
title: "Reformatting UKB 'all_lkps_maps.xlsx'"
author: "Alasdair Warwick"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  workflowr::wflow_html:
    toc: false
editor_options:
  chunk_output_type: console
---

```{r global-options, echo=FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE, echo=FALSE)
```

```{r}
library(tidyverse)
library(reactable)
library(readxl)
library(crosstalk)
library(targets)
library(codemapper)

# phewas r package
# devtools::install_github("PheWAS/PheWAS")
library(PheWAS)

# get UKB lookup and mapping tables
all_lkps_maps_raw <- tar_read(all_lkps_maps_raw)
all_lkps_maps <- tar_read(all_lkps_maps)
```

# Overview

**Aim:** to explore the phecode lookup and mapping files.

# Background - phecodes

- LINKS TO KEY PUBLICATIONS AND WEBPAGES
- WHAT CODING SYSTEM IS PHECODES BASED ON, AND WHICH CLINICAL CODES CAN BE MAPPED TO THIS?

# PheWAS R package

- READ HELP PAGE FROM RUNNING BELOW
- TO START, PERHAPS TRY RUNNING THE EXAMPLE (AT BOTTOM OF HELP PAGE) - COPY AND PASTE INTO THIS NOTEBOOK SO WE CAN SEE THE OUTPUT AT EACH STEP

```{r}
?PheWAS
```

# Mapping files

- DOWNLOAD PHECODE MAPPING FILES TO DATA DIRECTORY,THEN LOAD INTO R

```{r}

```

- How many ICD-10 codes are included in the UK Biobank lookup table? (head shown below)

```{r}
all_lkps_maps$icd10_lkp
```

- Which ICD-10 codes map to >1 phecode? (I think this is mentioned on the phecode website, and in Spiros' github repo readme)
